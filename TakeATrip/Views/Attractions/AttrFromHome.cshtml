@model TakeATrip.Models.AttractionsViewModel

@{
    ViewBag.Title = "AttrFromHome";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBN-U0Blvdbgj7PUv2_IOXL8QLqTdXRcS0&libraries=places"
        async defer></script>

@Styles.Render("~/Content/jquery-ui.css")
@Styles.Render("~/Content/attrFromHome.css")
@Styles.Render("~/Content/font-awesome.css")
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/dt-1.10.15/datatables.min.css" />

<script>var pixabayWidget = { 'key': '5393889-2ab22bb848a62eebf28c615cc' }</script>
<script src="~/Scripts/pixabay-widget.js"></script>

<h1>Find Your Attraction</h1>

<div>
    @using (Html.BeginForm())
    {
        <div class="col-lg-3">
            @Html.DropDownListFor(model => model.SelectedCatId, Model.CatList, "Select Type", new { @class = "form-control" })
            <div class="pixabay_widget" data-search="@Model.City" data-max-rows="4"></div>

        </div>
        <div class="col-lg-9">
            <table id="attrTable">
                <thead>
                    <tr>
                        <th hidden></th>
                        <th style="width:80%">Name</th>
                        <th style="width:20%">Rank</th>
                        <th hidden></th>
                        <th hidden></th>
                        <th hidden></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (TakeATrip.Models.Attractions item in Model.AttrList)
                    {
                        <tr>
                            <td> @item.Id</td>
                            <td> @item.Name</td>
                           @* <td><span class="stars">@item.Ranks.First().Rank</span></td>*@
                            <td>
                                @foreach (var rank in item.Ranks)
                                {
                                    @Html.Raw(rank.Rank + ",")
                                }

                            </td>
                            <td>
                                @foreach (var cat in item.Category)
                                {
                                    @Html.Raw(cat.Id + ",")
                                }
                            </td>
                            <td>
                                @item.Location.Latitude
                            </td>
                            <td>
                                @item.Location.Longitude
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
        <div>
            <button type="button" onclick="CreateTrack()" class="btn btn-primary">Create Track</button>
        </div>
        <div class="col-lg-offset-3">
            <div id="map" style="display:none;"></div>
        </div>


</div>

<script>
    var url = '@Url.Action("Details", "Attractions", new { id = "__id__" })';
</script>


<script type="text/javascript" src="https://cdn.datatables.net/v/bs/dt-1.10.15/datatables.min.js"></script>

@Scripts.Render("~/Scripts/jquery-ui.js")
@Scripts.Render("~/Scripts/attrFromHome.js")